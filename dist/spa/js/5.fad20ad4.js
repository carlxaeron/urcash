(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"0463":function(t,e,a){t.exports=a.p+"img/pay_success.cff626c3.png"},"0a37":function(t,e,a){"use strict";var s=a("a08e"),n=a.n(s);n.a},"875b":function(t,e,a){t.exports=a.p+"img/money.269b8843.png"},"93b4":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",{attrs:{padding:""}},[s("div",{staticClass:"fit column wrap justify-center items-center content-center"},[s("div",[s("p",{staticClass:"title"},[t._v("PAY")])]),s("div",{staticClass:"q-pt-none"},[s("p",{staticStyle:{"font-size":"24px"}},[t._v("Scan the merchant's QR to pay.")])]),!1===t.scan_result?s("div",{staticClass:"fit justify-center row inline q-mb-xl"},[s("StreamBarcodeReader",{staticStyle:{"max-width":"300px"},on:{decode:t.onDecode}})],1):t._e(),s("q-card",{staticClass:"my-card",attrs:{flat:""}},[s("q-separator"),s("q-card-section",[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-2"},[s("q-img",{staticStyle:{width:"50px"},attrs:{alt:"",src:a("875b")}})],1),s("div",{staticClass:"col-md-10 q-ml-md text-center "},[s("span",{staticClass:"text-h6"},[t._v("VOUCHER BALANCE")]),s("br"),s("span",{staticClass:"text-h6 text-bold"},[t._v("₱ "+t._s(t.formatPrice(t.balance)))])])])]),s("q-separator")],1)],1),s("q-dialog",{attrs:{persistent:""},model:{value:t.scan_result,callback:function(e){t.scan_result=e},expression:"scan_result"}},[s("q-card",{staticClass:"my-card"},[s("q-card-section",{staticClass:"q-pt-none"},[s("div",{staticClass:"items-center"},[s("div",{staticClass:"col text-h6 text-bold"},[s("center",[t._v("\n            YOU'RE PAYING\n            ")])],1)])]),s("q-card-section",{staticClass:"q-pt-none"},[s("div",{staticClass:"text-subtitle1 text-bold"},[s("center",[t._v("\n         "+t._s(t.shop_name)+"\n         ")])],1),s("div",{staticClass:"text-caption text-grey"},[s("center",[s("q-icon",{attrs:{name:"place"}}),t._v(" "+t._s(t.street)+" "+t._s(t.brgy)+" "+t._s(t.city)+" "+t._s(t.province)+"\n          ")],1)],1)]),s("q-separator"),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{attrs:{color:"negative",label:"Cancel"},on:{click:function(e){t.scan_result=!1}}}),s("q-btn",{attrs:{color:"info",label:"Proceed"},on:{click:function(e){t.prompt_amount=!0}}})],1)],1)],1),s("q-dialog",{attrs:{persistent:""},model:{value:t.prompt_amount,callback:function(e){t.prompt_amount=e},expression:"prompt_amount"}},[s("q-card",{staticStyle:{"min-width":"350px"}},[s("q-card-section",[s("div",{staticClass:"text-h6"},[t._v("Enter the amount to pay")])]),s("q-card-section",{staticClass:"q-pt-none"},[s("q-input",{ref:"amount",attrs:{type:"number","input-class":"text-h6",autofocus:"",rules:[function(t){return!!t||"Required"}]},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("b",[t._v("₱")])]},proxy:!0}]),model:{value:t.amount,callback:function(e){t.amount=e},expression:"amount"}})],1),s("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[s("q-btn",{attrs:{color:"negative",label:"Cancel"},on:{click:function(e){t.prompt_amount=!1,t.scan_result=!1}}}),s("q-btn",{attrs:{label:"Send Payment",color:"info"},on:{click:function(e){return t.pay()}}})],1)],1)],1),s("q-dialog",{attrs:{persistent:"",maximized:t.maximizedToggle},model:{value:t.pay_success,callback:function(e){t.pay_success=e},expression:"pay_success"}},[s("q-card",[s("q-card-section",[s("center",[s("q-img",{staticClass:"q-mt-xl",staticStyle:{width:"100%","max-width":"400px"},attrs:{alt:"",src:a("0463")}}),s("q-btn",{attrs:{size:"lg",color:"primary",label:"View Voucher Balance",to:"/"}})],1)],1)],1)],1),s("q-dialog",{attrs:{persistent:"",maximized:t.maximizedToggle},model:{value:t.pay_error,callback:function(e){t.pay_error=e},expression:"pay_error"}},[s("q-card",[s("q-card-section",[s("center",[s("q-img",{staticClass:"q-mt-xl",staticStyle:{width:"100%","max-width":"400px"},attrs:{alt:"",src:a("b92e")}}),s("q-btn",{attrs:{color:"negative",size:"lg",label:"Purchase Voucher",to:"/voucher"}})],1)],1)],1)],1)],1)},n=[],o=(a("5319"),a("f337")),r={name:"Pay",components:{StreamBarcodeReader:o["a"]},data(){return{pay_success:!1,pay_error:!1,maximizedToggle:!0,balance:this.$q.sessionStorage.getItem("balance"),shop_name:null,street:null,brgy:null,city:null,province:null,scan_result:!1,prompt_amount:!1,amount:null,shop_id:null}},methods:{pay(){this.$refs.amount.validate(),this.$refs.amount.hasError||this.$axios.post("pay",{payor_shop_id:this.$q.sessionStorage.getItem("shop_id"),payee_shop_id:this.shop_id,amount:this.amount},{headers:{Authorization:"Bearer "+this.$q.sessionStorage.getItem("token"),"Content-Type":"application/json"}}).then(t=>{console.log(t.data),this.pay_success=!0}).catch(t=>{console.log(t.response),this.pay_error=!0})},formatPrice(t){const e=(t/1).toFixed(2).replace(",",".");return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},onDecode(t){this.$axios.get("find/shops/"+t,{headers:{Authorization:"Bearer "+this.$q.sessionStorage.getItem("token"),"Content-Type":"application/json"}}).then(t=>{console.log(t.data),this.shop_name=t.data.results.shop_details.shop.reg_bus_name,this.street=t.data.results.shop_details.address.street,this.brgy=t.data.results.shop_details.address.barangay,this.city=t.data.results.shop_details.address.city,this.province=t.data.results.shop_details.address.province,this.scan_result=!0,this.shop_id=t.data.results.shop_details.shop.id}).catch(t=>{console.log(t.response)})}}},i=r,c=(a("0a37"),a("2877")),l=a("9989"),p=a("f09f"),d=a("eb85"),u=a("a370"),m=a("068f"),h=a("24e8"),_=a("0016"),g=a("4b7e"),y=a("9c40"),q=a("27f9"),b=a("eebe"),f=a.n(b),x=Object(c["a"])(i,s,n,!1,null,null,null);e["default"]=x.exports;f()(x,"components",{QPage:l["a"],QCard:p["a"],QSeparator:d["a"],QCardSection:u["a"],QImg:m["a"],QDialog:h["a"],QIcon:_["a"],QCardActions:g["a"],QBtn:y["a"],QInput:q["a"]})},a08e:function(t,e,a){},b92e:function(t,e,a){t.exports=a.p+"img/pay_error.253c9e26.png"}}]);