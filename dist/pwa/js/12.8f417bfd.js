(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{"365c":function(t,s,e){},"5ee4":function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("q-page",{staticClass:"myfont",attrs:{padding:""}},[!0===t.no_pending?e("div",{staticClass:"fit column wrap justify-center items-center content-center"},[e("div",[e("p",{staticClass:"title"},[t._v("BUY VOUCHER")])]),e("div",{staticClass:"fit column wrap content-center"},[e("div",{staticClass:"fit column wrap content-center but_width"},[!1===t.btn1?e("q-btn",{staticClass:"q-px-xl q-py-xs but",attrs:{size:"22px",color:"grey",label:"‎₱ 100"},on:{click:function(s){return t.btn_click(1)}}}):t._e(),!0===t.btn1?e("q-btn",{staticClass:"q-px-xl q-py-xs but",attrs:{size:"22px",color:"secondary",label:"‎₱ 100"}}):t._e()],1),e("div",{staticClass:"fit column wrap content-center but_width"},[!0===t.btn2?e("q-btn",{staticClass:"q-px-xl q-py-xs but",attrs:{size:"22px",color:"secondary",label:"‎₱ 500"}}):t._e(),0==t.btn2?e("q-btn",{staticClass:"q-px-xl q-py-xs but",attrs:{size:"22px",color:"grey",label:"‎₱ 500"},on:{click:function(s){return t.btn_click(2)}}}):t._e()],1),e("div",{staticClass:"fit column wrap content-center but_width"},[!0===t.btn3?e("q-btn",{staticClass:"q-px-xl q-py-xs but",attrs:{size:"22px",color:"secondary",label:"‎₱ 1,000"}}):t._e(),!1===t.btn3?e("q-btn",{staticClass:"q-px-xl q-py-xs but",attrs:{size:"22px",color:"grey",label:"‎₱ 1,000"},on:{click:function(s){return t.btn_click(3)}}}):t._e()],1)]),e("div",{staticClass:"fit row inline wrap justify-center items-center content-center vouch"},[e("p",{staticClass:"sub_total"},[t._v("# of Vouchers: ")]),e("q-input",{ref:"voucher_qty",attrs:{outlined:"",rules:[function(t){return!!t||"Required"}],type:"number"},on:{input:function(s){return t.sub_total()}},model:{value:t.voucher_qty,callback:function(s){t.voucher_qty=s},expression:"voucher_qty"}})],1),e("q-separator"),e("div",{staticClass:"fit"},[e("p",{staticClass:"sub q-ml-md"},[t._v("Sub Total: "),!0===t.calculated?e("span",{staticClass:"float-right q-mr-lg"},[t._v("₱ "+t._s(t.formatPrice(t.stotal)))]):t._e()]),e("p",{staticClass:"fee q-ml-md"},[t._v("Fee: "),!0===t.calculated?e("span",{staticClass:"float-right q-mr-lg"},[t._v("₱ "+t._s(t.formatPrice(t.fee)))]):t._e()])]),e("div",{staticClass:"fit column wrap content-center but_width"},[e("q-btn",{staticClass:"q-px-xl q-py-xs but",attrs:{size:"22px",color:"info",label:"CHECKOUT"},on:{click:function(s){return t.check_out()}}})],1)],1):t._e(),e("q-dialog",{attrs:{persistent:"",maximized:t.maximizedToggle},model:{value:t.reciept,callback:function(s){t.reciept=s},expression:"reciept"}},[e("div",{staticClass:" bg-white "},[e("q-card",{attrs:{flat:""}},[e("q-card-section",[e("div",{staticClass:"text-center "},[e("p",{staticClass:"title text-bold "},[t._v("PAYMENT")]),e("p",{staticClass:"via_pay"},[t._v("VIA "+t._s(t.title))]),e("q-separator")],1)]),e("q-card-section",{staticClass:"q-py-none"},[e("div",{staticClass:"fit"},[e("p",{staticClass:"sub_tot"},[t._v("Subtotal:")])]),e("div",{staticClass:"fit"},[e("p",{staticClass:"cash_2"},[t._v("₱ "+t._s(t.formatPrice(t.total)))])])]),e("q-card-section",{staticClass:"q-py-none"},[e("div",{staticClass:"fit"},[e("p",{staticClass:"instructions"},[t._v("Payment Instructions:")])]),e("div",{staticClass:"fit"},[e("p",{staticClass:"ins_dif"},[t._v(" "+t._s(t.payment_instruction)+".")])])]),e("q-card-section",{staticClass:"card_sec"},[1===t.pm_id?e("p",{staticClass:"desc"},[t._v("BANK NAME:")]):t._e(),1===t.pm_id?e("p",{staticClass:"desc_bank"},[t._v(" "+t._s(t.bank_name))]):t._e(),e("p",{staticClass:"desc"},[t._v("ACCOUNT NAME:")]),e("p",{staticClass:"desc_bank"},[t._v(t._s(t.account_name))]),e("p",{staticClass:"desc"},[t._v("ACCOUNT NUMBER:")]),e("p",{staticClass:"desc_bank"},[t._v(t._s(t.account_number))])]),e("q-card-section",{staticClass:"q-py-none"},[e("p",{staticClass:"veri_ins"},[t._v("Verification Instructions:")]),e("p",{staticClass:"veri"},[t._v(t._s(t.verification_instruction))])]),e("q-form",{staticClass:"q-gutter-md ",attrs:{enctype:"multipart/form-data"},on:{submit:t.onSubmit}},[e("q-card-section",{staticClass:"q-px-xl"},[e("q-file",{ref:"proof",attrs:{outlined:"",name:"poster_file",label:"Upload an image",accept:"image/*",rules:[function(t){return!!t||"Required"}]},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"camera"}})]},proxy:!0}]),model:{value:t.proof,callback:function(s){t.proof=s},expression:"proof"}})],1),e("center",[e("q-card-actions",{staticStyle:{width:"300px"},attrs:{vertical:""}},[e("q-btn",{staticClass:"q-mb-sm",attrs:{size:"20px",type:"submit",color:"info",icon:"cloud_upload",label:"UPLOAD"}}),e("q-btn",{staticClass:"q-mb-sm",attrs:{size:"20px",color:"secondary",to:"/"}},[t._v("UPLOAD LATER ")]),e("q-btn",{attrs:{size:"20px",color:"grey"},on:{click:function(s){return t.cancel_order()}}},[t._v("CANCEL PURCHASE")])],1)],1)],1)],1)],1)])],1)},i=[],n=(e("e01a"),e("5319"),{name:"VoucherPurchase",data(){return{no_pending:!1,voucher_qty:null,btn1:!1,btn2:!1,btn3:!1,checkout:!1,stotal:null,fee:null,amount:null,calculated:!1,voucher_id:null,server_message:null,proof:null,reciept:!1,maximizedToggle:!0,title:null,total:null,payment_instruction:null,verification_instruction:null,bank_name:null,account_name:null,account_number:null,pm_id:null,voucher_orders_id:null,msg:null}},methods:{showNotif(){this.$q.notify({message:this.msg,color:"info"})},cancel_order(){this.$axios.post("voucher-order/"+this.voucher_orders_id+"/cancel",{headers:{Authorization:"Bearer "+this.$q.sessionStorage.getItem("token"),"Content-Type":"application/json"}}).then(t=>{this.reciept=!1,this.no_pending=!0,this.msg="You have cancelled your voucher purchase. Thank you!",this.showNotif(),console.log(t.data)}).catch(t=>{console.log(t.response)})},onSubmit(t){const s=new FormData;s.append("select_file",this.proof),s.append("voucher_orders_id",this.voucher_orders_id),this.$axios.post("voucher-order/upload/proof-of-payment",s,{headers:{Authorization:"Bearer "+this.$q.sessionStorage.getItem("token"),"Content-Type":"multipart/form-data"}}).then(t=>{console.log(t.data),this.msg="Your purchase is now being process. Thank you!",this.showNotif(),this.reciept=!1,this.no_pending=!0}).catch(t=>{console.log(t.response)})},servermsg(){this.$q.dialog({title:"Something went wrong.",message:this.server_message,persistent:!0}).onOk(()=>{}).onOk(()=>{}).onCancel(()=>{}).onDismiss(()=>{})},check_out(){this.$refs.voucher_qty.validate(),this.$refs.voucher_qty.hasError?(this.server_message="Please provide # of voucher!",this.servermsg()):!1===this.btn1&&!1===this.btn2&&!1===this.btn3?(this.server_message="Please choose voucher amount",this.servermsg()):(this.$q.localStorage.set("vp_id",this.voucher_id),this.$q.localStorage.set("qty",this.voucher_qty),this.$q.localStorage.set("amount",this.stotal),this.$router.replace("/pay-voucher"))},btn_click(t){1===t?(this.btn1=!0,this.btn2=!1,this.btn3=!1,this.sub_total()):2===t?(this.btn2=!0,this.btn1=!1,this.btn3=!1,this.sub_total()):3===t&&(this.btn3=!0,this.btn2=!1,this.btn1=!1,this.sub_total())},sub_total(){this.calculated=!0,!0===this.btn1?(this.amount=100,this.voucher_id=1):!0===this.btn2?(this.amount=500,this.voucher_id=2):!0===this.btn3&&(this.amount=1e3,this.voucher_id=3),this.amount=this.amount*this.voucher_qty,this.fee=.03*this.amount,this.stotal=parseInt(this.fee)+parseInt(this.amount)},formatPrice(t){const s=(t/1).toFixed(2).replace(",",".");return s.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},getVoucher(){this.$axios.get("voucher-order/"+this.$q.sessionStorage.getItem("voucher_id")+"/no-proof-of-payment",{headers:{Authorization:"Bearer "+this.$q.sessionStorage.getItem("token"),"Content-Type":"application/json"}}).then(t=>{console.log(t.data),t.data.results.length>0?(this.reciept=!0,this.title=t.data.results[0].payment_method.title,this.total=parseInt(t.data.results[0].amount)+parseInt(t.data.results[0].fee),this.payment_instruction=t.data.results[0].payment_method.payment_intstruction,this.verification_instruction=t.data.results[0].payment_method.verification_instruction,this.bank_name=t.data.results[0].payment_method.description,this.account_name=t.data.results[0].payment_method.account_name,this.account_number=t.data.results[0].payment_method.account_number,this.pm_id=t.data.results[0].payment_method.id,this.voucher_orders_id=t.data.results[0].id):this.no_pending=!0}).catch(t=>{console.log(t.response)})},getPayment(){this.$axios.get("payment-methods",{headers:{Authorization:"Bearer "+this.$q.sessionStorage.getItem("token"),"Content-Type":"application/json"}}).then(t=>{console.log(t.data)}).catch(t=>{console.log(t.response)})}},created(){this.getVoucher(),this.getPayment()}}),o=n,c=(e("a4af"),e("2877")),r=e("9989"),l=e("9c40"),u=e("27f9"),h=e("eb85"),p=e("24e8"),d=e("f09f"),_=e("a370"),m=e("0378"),b=e("7d53"),v=e("0016"),f=e("4b7e"),g=e("eebe"),q=e.n(g),C=Object(c["a"])(o,a,i,!1,null,null,null);s["default"]=C.exports;q()(C,"components",{QPage:r["a"],QBtn:l["a"],QInput:u["a"],QSeparator:h["a"],QDialog:p["a"],QCard:d["a"],QCardSection:_["a"],QForm:m["a"],QFile:b["a"],QIcon:v["a"],QCardActions:f["a"]})},a4af:function(t,s,e){"use strict";var a=e("365c"),i=e.n(a);i.a}}]);