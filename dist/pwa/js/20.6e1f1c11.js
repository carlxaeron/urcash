(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[20],{"360b":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-layout",{staticClass:"myfont ",attrs:{view:"lHh Lpr lFf"}},[a("q-page-container",[a("q-page",[a("div",{staticClass:"col-lg-12 col-md-12 col-sm-12 q-mt-md flex flex-center"},[a("span",{staticClass:"text-h4 text-bold q-my-md"},[t._v("Transaction History")])]),a("div",{staticClass:"q-pa-md flex flex-center"},[a("div",{staticClass:"q-gutter-y-md",staticStyle:{"max-width":"400px"}},[a("q-card",[a("q-tabs",{staticClass:"text-grey",attrs:{dense:"","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab",{attrs:{name:"product",label:"Products"}}),a("q-tab",{attrs:{name:"voucher",label:"Vouchers"}}),a("q-tab",{attrs:{name:"payments",label:"Payments"}})],1),a("q-separator"),a("q-tab-panels",{attrs:{animated:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab-panel",{attrs:{name:"product"}},[a("q-table",{attrs:{title:"Product Checkout Transaction",data:t.purchaseTransaction,columns:t.purchase_columns,"row-key":"cutomer_num","binary-state-sort":"",flat:""},scopedSlots:t._u([{key:"body",fn:function(e){return[a("q-tr",{attrs:{props:e}},[a("q-td",{key:"cutomer_num",attrs:{props:e}},[t._v("\r\n               "+t._s(e.row.customer_mobile_number)+"\r\n          ")]),a("q-td",{key:"amount",attrs:{props:e}},[a("div",{staticClass:"text-pre-wrap"},[t._v("â‚± "+t._s(t.formatPrice(e.row.subtotal)))])]),a("q-td",{key:"date",attrs:{props:e}},[t._v("\r\n            "+t._s(e.row.created_at)+"\r\n          ")])],1)]}}])})],1),a("q-tab-panel",{attrs:{name:"voucher"}},[a("q-table",{attrs:{title:"Voucher Account Transactions",data:t.voucherTransaction,columns:t.voucher_columns,"row-key":"reference","binary-state-sort":"",flat:""},scopedSlots:t._u([{key:"body",fn:function(e){return[a("q-tr",{attrs:{props:e}},[a("q-td",{key:"reference",attrs:{props:e}},[t._v("\r\n               "+t._s(e.row.ref_number)+"\r\n          ")]),a("q-td",{key:"tranType",attrs:{props:e}},[t._v("\r\n               "+t._s(e.row.transaction_type)+"\r\n          ")]),a("q-td",{key:"amount",attrs:{props:e}},[t._v("\r\n            "+t._s(e.row.amount)+"\r\n          ")]),a("q-td",{key:"date",attrs:{props:e}},[t._v("\r\n            "+t._s(e.row.created_at)+"\r\n          ")])],1)]}}])})],1),a("q-tab-panel",{attrs:{name:"payments"}},[a("q-table",{attrs:{title:"Pay Transactions",data:t.payTransaction,columns:t.pay_columns,"row-key":"reference","binary-state-sort":"",flat:""},scopedSlots:t._u([{key:"body",fn:function(e){return[a("q-tr",{attrs:{props:e}},[a("q-td",{key:"reference",attrs:{props:e}},[t._v("\r\n               "+t._s(e.row.ref_number)+"\r\n          ")]),a("q-td",{key:"tranType",attrs:{props:e}},[t._v("\r\n               "+t._s(e.row.transaction_type)+"\r\n          ")]),a("q-td",{key:"amount",attrs:{props:e}},[t._v("\r\n            "+t._s(e.row.amount)+"\r\n          ")]),a("q-td",{key:"date",attrs:{props:e}},[t._v("\r\n            "+t._s(e.row.created_at)+"\r\n          ")])],1)]}}])})],1)],1)],1)],1)])])],1)],1)},n=[],s=(a("5319"),{name:"transactionPage",data(){return{tab:"product",shop_id:null,purchase_columns:[{name:"cutomer_num",align:"left",label:"Customer #",field:"customer_mobile_number",sortable:!0},{name:"amount",label:"Amount",align:"left",field:"subtotal",sortable:!0},{name:"date",required:!0,label:"Date",align:"left",field:"created_at",sortable:!0}],voucher_columns:[{name:"reference",align:"left",label:"Reference #",field:"ref_number",sortable:!0},{name:"tranType",label:"Transaction Type",align:"left",field:"transaction_type",sortable:!0},{name:"amount",label:"Amount",align:"left",field:"amount",sortable:!0},{name:"date",required:!0,label:"Date",align:"left",field:"created_at",sortable:!0}],pay_columns:[{name:"reference",align:"left",label:"Reference #",field:"ref_number",sortable:!0},{name:"tranType",label:"Transaction Type",align:"left",field:"transaction_type",sortable:!0},{name:"amount",label:"Amount",align:"left",field:"amount",sortable:!0},{name:"date",required:!0,label:"Date",align:"left",field:"created_at",sortable:!0}],voucherTransaction:[],purchaseTransaction:[],payTransaction:[]}},methods:{formatPrice(t){const e=(t/1).toFixed(2).replace(",",".");return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},getPurchase(t){this.$axios.get("transactions/shop/"+t,{headers:{Authorization:"Bearer "+this.$q.sessionStorage.getItem("token"),"Content-Type":"application/json"}}).then(t=>{console.log(t.data.results),this.purchaseTransaction=t.data.results}).catch(t=>{console.log(t.response)})},getVoucher(t){this.$axios.get("voucher/account/"+t+"/transaction",{headers:{Authorization:"Bearer "+this.$q.sessionStorage.getItem("token"),"Content-Type":"application/json"}}).then(t=>{console.log(t.data),this.voucherTransaction=t.data.results}).catch(t=>{console.log(t.response)})},getpay(t){this.$axios.get("pay/transaction/"+t,{headers:{Authorization:"Bearer "+this.$q.sessionStorage.getItem("token"),"Content-Type":"application/json"}}).then(t=>{console.log(t.data),this.payTransaction=t.data.results}).catch(t=>{console.log(t.response)})},getUser(){this.$axios.post("user",{mobile_number:this.$q.localStorage.getItem("mobile").toString()},{headers:{Authorization:"Bearer "+this.$q.sessionStorage.getItem("token"),"Content-Type":"application/json"}}).then(t=>{console.log(t.data.results),this.getPurchase(t.data.results.shop.id),this.getVoucher(t.data.results.voucher_account.id),this.getpay(t.data.results.voucher_account.id)}).catch(t=>{console.log(t.response)})}},created(){this.getUser()}}),o=s,l=a("2877"),c=a("4d5a"),i=a("09e3"),u=a("9989"),p=a("f09f"),d=a("429b"),m=a("7460"),b=a("eb85"),h=a("adad"),f=a("823b"),y=a("eaac"),_=a("bd08"),g=a("db86"),q=a("eebe"),v=a.n(q),T=Object(l["a"])(o,r,n,!1,null,null,null);e["default"]=T.exports;v()(T,"components",{QLayout:c["a"],QPageContainer:i["a"],QPage:u["a"],QCard:p["a"],QTabs:d["a"],QTab:m["a"],QSeparator:b["a"],QTabPanels:h["a"],QTabPanel:f["a"],QTable:y["a"],QTr:_["a"],QTd:g["a"]})}}]);