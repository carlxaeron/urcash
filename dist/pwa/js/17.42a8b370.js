(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[17],{"2ff9":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-layout",{staticClass:"myfont ",attrs:{view:"lHh Lpr lFf"}},[a("q-page-container",[a("q-page",[a("div",{staticClass:"row bg-secondary flex flex-center"},[a("q-card",{staticClass:"bg-secondary",attrs:{flat:""}},[a("q-card-section",[a("q-avatar",{staticClass:"bg-black",attrs:{size:"150px"}},[a("img",{attrs:{src:t.imUrl,alt:"Profile Picture"}})]),a("q-file",{staticClass:"q-px-xs q-pt-none",attrs:{label:"Update photo",accept:"image/*","input-class":"text-white","label-color":"white",borderless:"",color:"white"},on:{input:function(e){return t.onSubmit()}},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"camera",color:"white"}})]},proxy:!0}]),model:{value:t.picture,callback:function(e){t.picture=e},expression:"picture"}})],1)],1)],1),a("div",{staticClass:"fit column wrap justify-center content-center q-px-xl"},[a("div",{staticClass:"fit column wrap justify-center content-center"},[a("span",{staticClass:"text-h6 text-bold"},[t._v("Personal Information")]),a("p",{staticClass:"fit c-lock"}),a("q-input",{attrs:{clearable:"","input-class":"text-negative","clear-icon":"close",label:"First Name"},on:{change:function(e){return t.updpr()}},model:{value:t.fname,callback:function(e){t.fname=e},expression:"fname"}})],1),a("div",{staticClass:"fit column wrap justify-center content-center"},[a("p",{staticClass:"fit c-lock"}),a("q-input",{attrs:{clearable:"","input-class":"text-negative","clear-icon":"close",label:"Middle Name"},on:{change:function(e){return t.updpr()}},model:{value:t.mname,callback:function(e){t.mname=e},expression:"mname"}})],1),a("div",{staticClass:"fit column wrap justify-center content-center"},[a("p",{staticClass:"fit c-lock"}),a("q-input",{attrs:{"input-class":"text-negative",clearable:"","clear-icon":"close",label:"Last Name"},on:{change:function(e){return t.updpr()}},model:{value:t.lname,callback:function(e){t.lname=e},expression:"lname"}})],1),a("div",{staticClass:"fit column wrap justify-center content-center"},[a("p",{staticClass:"fit c-lock"}),a("q-input",{attrs:{"input-class":"text-negative","clear-icon":"close",label:"Phone Number"},model:{value:t.mobile,callback:function(e){t.mobile=e},expression:"mobile"}})],1),a("div",{staticClass:"fit column wrap justify-center content-center"},[a("p",{staticClass:"fit c-lock"}),a("q-input",{attrs:{"input-class":"text-negative","clear-icon":"close",label:"Email Address"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),a("div",{staticClass:"fit column wrap justify-center content-center"},[a("p",{staticClass:"fit c-lock"}),a("q-input",{attrs:{"input-class":"text-negative",type:"date","clear-icon":"close",max:t.maxdate},on:{change:function(e){return t.updpr()}},model:{value:t.birthdate,callback:function(e){t.birthdate=e},expression:"birthdate"}})],1),a("div",{staticClass:"fit column wrap justify-center content-center"},[a("span",{staticClass:"text-h6 text-bold q-mt-lg"},[t._v("Address")]),a("p",{staticClass:"fit c-lock"}),a("q-input",{attrs:{"input-class":"text-negative",clearable:"","clear-icon":"close",label:"Street"},on:{change:function(e){return t.updpr()}},model:{value:t.street,callback:function(e){t.street=e},expression:"street"}})],1),a("div",{staticClass:"fit column wrap justify-center content-center"},[a("p",{staticClass:"fit c-lock"}),a("q-input",{attrs:{"input-class":"text-negative",clearable:"","clear-icon":"close",label:"Brgy."},on:{change:function(e){return t.updpr()}},model:{value:t.brgy,callback:function(e){t.brgy=e},expression:"brgy"}})],1),a("div",{staticClass:"fit column wrap justify-center content-center"},[a("p",{staticClass:"fit c-lock"}),a("q-input",{attrs:{"input-class":"text-negative",clearable:"","clear-icon":"close",label:"City/Municipality"},on:{change:function(e){return t.updpr()}},model:{value:t.city,callback:function(e){t.city=e},expression:"city"}})],1),a("div",{staticClass:"fit column wrap justify-center content-center q-mb-md"},[a("p",{staticClass:"fit c-lock"}),a("q-input",{attrs:{"input-class":"text-negative",clearable:"","clear-icon":"close",label:"Province"},on:{change:function(e){return t.updpr()}},model:{value:t.province,callback:function(e){t.province=e},expression:"province"}})],1)])])],1)],1)},n=[],i=(a("fb6a"),a("5319"),a("bf19"),{name:"ProfilePage",data(){return{maxdate:new Date(new Date-567648e6).toJSON().slice(0,10).replace(/-/g,"-"),balance:null,fname:null,lname:null,mname:null,birthdate:"",email:null,mobile:null,brgy:null,city:null,province:null,street:null,picture:null,id:null,msg:null,imUrl:"https://cdn.quasar.dev/img/boy-avatar.png"}},methods:{updpr(){this.$axios.post("update-user/"+this.id,{first_name:this.fname,middle_name:this.mname,last_name:this.lname,birthdate:this.birthdate,street:this.street,barangay:this.brgy,city:this.city,province:this.province},{headers:{Authorization:"Bearer "+this.$q.sessionStorage.getItem("token"),"Content-Type":"application/json"}}).then(t=>{console.log(t.data),this.msg="Update successful!",this.showNotif()}).catch(t=>{console.log(t.response)})},showNotif(){this.$q.notify({message:this.msg,color:"info"})},onSubmit(){const t=new FormData;t.append("select_file",this.picture),this.$axios.post("update/user/"+this.id+"/profile/picture",t,{headers:{Authorization:"Bearer "+this.$q.sessionStorage.getItem("token"),"Content-Type":"multipart/form-data"}}).then(t=>{console.log(t.data),this.msg="Profile picture updated successfully!",this.showNotif(),location.reload()}).catch(t=>{console.log(t.response)})},formatPrice(t){const e=(t/1).toFixed(2).replace(",",".");return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},getUser(){this.$axios.post("user",{mobile_number:this.$q.localStorage.getItem("mobile").toString()},{headers:{Authorization:"Bearer "+this.$q.sessionStorage.getItem("token"),"Content-Type":"application/json"}}).then(t=>{this.fname=t.data.results.user.first_name,this.id=t.data.results.user.id,this.imUrl="https://api.urcash.digital/"+t.data.results.user.profile_picture,this.lname=t.data.results.user.last_name,this.mname=t.data.results.user.middle_name,this.birthdate=t.data.results.birthdate,this.email=t.data.results.user.email,this.mobile=t.data.results.user.mobile_number,this.brgy=t.data.results.address.barangay,this.city=t.data.results.address.city,this.province=t.data.results.address.province,this.street=t.data.results.address.street,this.balance=parseInt(t.data.results.voucher_account.voucher_balanace)}).catch(t=>{console.log(t.response)})}},created(){this.getUser()}}),l=i,c=a("2877"),r=a("4d5a"),o=a("09e3"),u=a("9989"),p=a("f09f"),d=a("a370"),m=a("cb32"),f=a("7d53"),h=a("0016"),b=a("27f9"),g=a("eebe"),v=a.n(g),y=Object(c["a"])(l,s,n,!1,null,null,null);e["default"]=y.exports;v()(y,"components",{QLayout:r["a"],QPageContainer:o["a"],QPage:u["a"],QCard:p["a"],QCardSection:d["a"],QAvatar:m["a"],QFile:f["a"],QIcon:h["a"],QInput:b["a"]})}}]);